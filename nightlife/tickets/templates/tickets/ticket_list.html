<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NightLife - Explore Nightclubs</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
</head>
<body class="homepage">

<!-- Header Section -->
<header class="header">
    <div class="logo-section">
        <img src="{% static 'images/logo.png' %}" alt="NightLife Logo" class="logo">
        <h1>NightLife</h1>
    </div>
    <div class="header-icons">
        {% if user.is_authenticated %}
            <a href="{% url 'profile' %}" class="profile-icon">
                <img src="{% static 'images/profile-icon.png' %}" alt="Profile Icon">
            </a>
        {% else %}
            <a href="{% url 'register' %}" class="auth-button red-button">Sign Up</a>
            <a href="{% url 'login' %}" class="auth-button red-button">Login</a>
        {% endif %}
    </div>
</header>

<!-- Search Bar -->
<section class="search-section">
    <div class="search-bar">
        <span class="search-icon">
            <img src="{% static 'images/search-icon.png' %}" alt="Search Icon">
        </span>
        <input type="text" placeholder="¿Dónde es la fiesta?" name="search" class="search-input">
    </div>
</section>

<section class="nightclub-list">
    <h2>Available Tickets for {{ nightclub.name }}</h2> <!-- Nombre de la discoteca -->

    <!-- Sección de Información de la Discoteca -->
    <div class="nightclub-info-section">
        <p>{{ nightclub.description }}</p> <!-- Descripción de la discoteca -->
        <!-- Ícono para descargar información en JSON -->
        <a href="{% url 'download-nightclub-json' nightclub.id %}" class="info-icon">
            <img src="{% static 'images/info.png' %}" alt="Descargar JSON" title="Descargar Información JSON">
            Descargar Información JSON
        </a>
    </div>

    <!-- Lista de Tickets -->
    <div class="nightclubs">
        {% for ticket in tickets %}
        <div class="ticket-card">
        <h3>{{ ticket.ticket_type }}</h3>
        <p>Precio: ${{ ticket.price }}</p>
        <a href="{% url 'ticket-detail' ticket.id %}">Ver detalles</a> <!-- Enlace al detalle del ticket -->
    </div>
        {% endfor %}
    </div>
</section>

<!-- Mapa de Google al final de la página -->
<section class="map-section">
    <h2>Location of {{ nightclub.name }}</h2>
    <div id="map" style="height: 400px; width: 100%;"></div>
</section>

<!-- Cargar el script de la API de Google Maps -->
<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCg3kfOFObUBkngC-llaIe5oh7zD5gc1qE&callback=initMap"></script>


<script>
    function initMap() {
        // Coordenadas de la discoteca
        const nightclubLocation = {
            lat: parseFloat({{ nightclub.latitude }}),
            lng: parseFloat({{ nightclub.longitude }})
        };

        // Crear el mapa centrado en la discoteca
        const map = new google.maps.Map(document.getElementById("map"), {
            zoom: 15,
            center: nightclubLocation,
        });

        // Crear un marcador en la ubicación de la discoteca
        new google.maps.Marker({
            position: nightclubLocation,
            map: map,
            title: "{{ nightclub.name }}"
        });
    }
</script>

<style>
.nightclub-info-section {
    display: flex;
    align-items: center;
    justify-content: space-between;
    background-color: #2c2c2c;
    padding: 15px;
    border-radius: 10px;
    margin-bottom: 20px;
}

.nightclub-info-section p {
    color: #ccc;
    margin: 0;
    font-size: 16px;
    flex-grow: 1;
}

.info-icon {
    display: flex;
    align-items: center;
    gap: 10px;
    color: #F60800;
    text-decoration: none;
    font-size: 16px;
}

.info-icon img {
    height: 20px;
    width: 20px;
}

.info-icon:hover {
    color: #6B3FA0;
}

.ticket-card {
    background-color: #1c1c1c;
    padding: 15px;
    border-radius: 10px;
    margin-bottom: 15px;
    transition: box-shadow 0.3s ease;
}

.ticket-card-link {
    text-decoration: none;
    color: inherit;
    display: flex;
}

.ticket-info h3 {
    font-size: 18px;
    color: white;
}

.ticket-price {
    font-size: 16px;
    color: #bbb;
}

.ticket-card:hover {
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
}

.map-section {
    margin-top: 20px;
    text-align: center;
}

#map {
    border: 1px solid #ccc;
    border-radius: 10px;
}
</style>

</body>
</html>
